-------------------------------------------------------------------------------
--
-- Title       : trilut
-- Author      : Mateusz Dyrdół
--
-------------------------------------------------------------------------------
LIBRARY IEEE;
USE IEEE.STD_LOGIC_1164.ALL;
use IEEE.numeric_std.ALL;
ENTITY trilut_entity IS
  GENERIC(lut_bit_width : integer := 8;
			 DATA_width: integer := 16
  );
  PORT(
    phase_in      : in unsigned(lut_bit_width-1 downto 0);
    a_clk      : in std_logic;
    reset         : in std_logic;
    DATA          : OUT std_logic_vector(15 downto 0)
  );
END trilut_entity;

architecture behav of trilut_entity is 
--LUT
type sine_lut is array (0 to (2**lut_bit_width)-1) of integer;
constant sinedata:sine_lut:= (0,500,1000,1500,2000,2500,3000,3500,4000,4500,5000,5500,6000,6500,7000,7500,8000,8500,9000,9500,10000,10500,11000,11500,12000,12500,13000,13500,14000,14500,15000,15500,16000,16500,17000,17500,18000,18500,19000,19500,20000,20500,21000,21500,22000,22500,23000,23500,24000,24500,25000,25500,26000,26500,27000,27500,28000,28500,29000,29500,30000,30500,31000,31500,32000,31500,31000,30500,30000,29500,29000,28500,28000,27500,27000,26500,26000,25500,25000,24500,24000,23500,23000,22500,22000,21500,21000,20500,20000,19500,19000,18500,18000,17500,17000,16500,16000,15500,15000,14500,14000,13500,13000,12500,12000,11500,11000,10500,10000,9500,9000,8500,8000,7500,7000,6500,6000,5500,5000,4500,4000,3500,3000,2500,2000,1500,1000,500,0,-500,-1000,-1500,-2000,-2500,-3000,-3500,-4000,-4500,-5000,-5500,-6000,-6500,-7000,-7500,-8000,-8500,-9000,-9500,-10000,-10500,-11000,-11500,-12000,-12500,-13000,-13500,-14000,-14500,-15000,-15500,-16000,-16500,-17000,-17500,-18000,-18500,-19000,-19500,-20000,-20500,-21000,-21500,-22000,-22500,-23000,-23500,-24000,-24500,-25000,-25500,-26000,-26500,-27000,-27500,-28000,-28500,-29000,-29500,-30000,-30500,-31000,-31500,-32000,-31500,-31000,-30500,-30000,-29500,-29000,-28500,-28000,-27500,-27000,-26500,-26000,-25500,-25000,-24500,-24000,-23500,-23000,-22500,-22000,-21500,-21000,-20500,-20000,-19500,-19000,-18500,-18000,-17500,-17000,-16500,-16000,-15500,-15000,-14500,-14000,-13500,-13000,-12500,-12000,-11500,-11000,-10500,-10000,-9500,-9000,-8500,-8000,-7500,-7000,-6500,-6000,-5500,-5000,-4500,-4000,-3500,-3000,-2500,-2000,-1500,-1000,-500);
signal 	sDATA    : std_logic_vector(15 downto 0);

begin
	process(a_clk,reset)
		variable lutindex : integer range 0 to (2**lut_bit_width)-1 := 0;
	begin
		
		if reset = '0' then
			DATA <= (others => '0');
			lutindex := 0;
		elsif rising_edge(a_clk) then
			lutindex := to_integer(phase_in);
			sDATA <= std_logic_vector(to_signed(sinedata(lutindex), DATA_width));
			DATA <= sDATA; 

		end if;	
	
	end process;

end behav;