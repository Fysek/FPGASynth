-------------------------------------------------------------------------------
--
-- Title       : sinelut
-- Author      : Mateusz Dyrdół
--
-------------------------------------------------------------------------------
LIBRARY IEEE;
USE IEEE.STD_LOGIC_1164.ALL;
use IEEE.numeric_std.ALL;
ENTITY sinelut_entity IS
  GENERIC(lut_bit_width : integer := 8;
			 DATA_width: integer := 16
  );
  PORT(
    phase_in      : in unsigned(lut_bit_width-1 downto 0);
    a_clk      : in std_logic;
    reset         : in std_logic;
    DATA          : OUT std_logic_vector(15 downto 0)
  );
END sinelut_entity;

architecture behav of sinelut_entity is 
--LUT
type sine_lut is array (0 to (2**lut_bit_width)-1) of integer;
constant sinedata:sine_lut:= (0,784,1572,2356,3136,3916,4696,5472,6244,7012,7776,8536,9288,10036,10780,11516,12244,12968,13680,14388,15084,15772,16452,17120,17780,18424,19064,19688,20300,20900,21488,22064,22628,23176,23712,24232,24736,25228,25704,26164,26608,27036,27448,27844,28220,28584,28928,29256,29564,29856,30128,30384,30624,30840,31040,31224,31384,31528,31652,31760,31844,31912,31960,31992,32000,31992,31960,31912,31844,31760,31652,31528,31384,31224,31040,30840,30624,30384,30128,29856,29564,29256,28928,28584,28220,27844,27448,27036,26608,26164,25704,25228,24736,24232,23712,23176,22628,22064,21488,20900,20300,19688,19064,18424,17780,17120,16452,15772,15084,14388,13680,12968,12244,11516,10780,10036,9288,8536,7776,7012,6244,5472,4696,3916,3136,2356,1572,784,0,-784,-1572,-2356,-3136,-3916,-4696,-5472,-6244,-7012,-7776,-8536,-9288,-10036,-10780,-11516,-12244,-12968,-13680,-14388,-15084,-15772,-16452,-17120,-17780,-18424,-19064,-19688,-20300,-20900,-21488,-22064,-22628,-23176,-23712,-24232,-24736,-25228,-25704,-26164,-26608,-27036,-27448,-27844,-28220,-28584,-28928,-29256,-29564,-29856,-30128,-30384,-30624,-30840,-31040,-31224,-31384,-31528,-31652,-31760,-31844,-31912,-31960,-31992,-32000,-31992,-31960,-31912,-31844,-31760,-31652,-31528,-31384,-31224,-31040,-30840,-30624,-30384,-30128,-29856,-29564,-29256,-28928,-28584,-28220,-27844,-27448,-27036,-26608,-26164,-25704,-25228,-24736,-24232,-23712,-23176,-22628,-22064,-21488,-20900,-20300,-19688,-19064,-18424,-17780,-17120,-16452,-15772,-15084,-14388,-13680,-12968,-12244,-11516,-10780,-10036,-9288,-8536,-7776,-7012,-6244,-5472,-4696,-3916,-3136,-2356,-1572,-784
);
signal 	sDATA    : std_logic_vector(15 downto 0);

begin


	process(a_clk,reset)
		variable lutindex : integer range 0 to (2**lut_bit_width)-1 := 0;
	begin
		
		if reset = '0' then
			DATA <= (others => '0');
			lutindex := 0;
		elsif rising_edge(a_clk) then
			lutindex := to_integer(phase_in);
			sDATA <= std_logic_vector(to_signed(sinedata(lutindex), DATA_width));
			DATA <= sDATA; 

		end if;	
	
	end process;

end behav;